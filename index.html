<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>cnax&#39;s work experiences</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="cnax&#39;s work experiences">
<meta property="og:url" content="http://ax-jun.gitee.io/blog/">
<meta property="og:site_name" content="cnax&#39;s work experiences">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="cnax">
<meta name="twitter:card" content="summary">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/blog/css/style.css">

<meta name="generator" content="Hexo 5.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">cnax&#39;s work experiences</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/categories/Vuejs/">Vuejs</a>
        
          <a class="main-nav-link" href="/blog/categories/Reactjs/">Reactjs</a>
        
          <a class="main-nav-link" href="/blog/categories/%E5%B7%A5%E5%85%B7/">工具</a>
        
      </nav>
      <nav id="sub-nav">
        
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://ax-jun.gitee.io/blog"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-message-template-creator" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/12/02/message-template-creator/" class="article-date">
  <time datetime="2020-12-02T08:01:36.000Z" itemprop="datePublished">2020-12-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/Vuejs/">Vuejs</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2020/12/02/message-template-creator/">短信消息模板配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近系统中需要做一个短信消息配置的功能。实际效果如下：</p>
<p><img src="https://imgkr2.cn-bj.ufileos.com/570fa471-8d05-457d-809b-ab52611185e2.gif?UCloudPublicKey=TOKEN_8d8b72be-579a-4e83-bfd0-5f6ce1546f13&Signature=lOfRATQVzaeGrJzZv6%252FBhaiBUu8%253D&Expires=1606975886" alt="效果图"></p>
<p>可以看到整体分三块：<br>右侧是标签列表区，左侧又分上下两块：上面是可以消息模板编辑区，下面是预览当前已经配置好的短信消息。<br>需求：<br>消息模板编辑区可以输入文本，并且如果鼠标焦点在编辑区域内，再去点击右侧标签，将被点击的标签插入进消息文本中，预览区域需要实时显示当前模板的消息。</p>
<h3 id="技术分析"><a href="#技术分析" class="headerlink" title="技术分析"></a>技术分析</h3><p>拆解功能：</p>
<ul>
<li>需求中有需要编辑的功能，不涉及富文本，另外产品希望用户如果复制可编辑区域内的文本，只能复制纯的文本，那我们可以使用可编辑的div来做，给div加上一个css样式：<code>user-modify: read-write-plaintext-only</code>。这个css样式代码可以使div表现的和textarea一样可以编辑，并且复制出来的内容只会是纯文本。<br>具体的<code>user-modify</code>可以参考 <a target="_blank" rel="noopener" href="https://www.zhangxinxu.com/wordpress/2016/01/contenteditable-plaintext-only/">https://www.zhangxinxu.com/wordpress/2016/01/contenteditable-plaintext-only/</a></li>
<li>鼠标光标在编辑区域内，点击标签，将标签插入编辑区域内的文本中，这里涉及到一个不常用的 <code>DOM api：selectionchange</code>。</li>
<li>在标签被点击后，标签插入编辑区域的文本中后，标签中的文字不能被选中，只能整体选中这个标签，并且在按 <code>Backspace</code>键 删除时，删除的应该是整个标签。</li>
</ul>
<h3 id="页面框架布局"><a href="#页面框架布局" class="headerlink" title="页面框架布局"></a>页面框架布局</h3><p>左右两个div区分开，左侧主要是两个功能区，一个<code>class=&quot;msg-tpl-ctor-input&quot;</code>的可编辑区域，一个<code>class=&quot;msg-tpl-ctor-view&quot;</code>的实时预览区域，右侧标签选择区</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;msg-tpl-ctor&quot; ref&#x3D;&quot;msgTplCtor&quot;&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;left&quot;&gt;</span><br><span class="line">    &lt;p&gt;编辑区域：&lt;&#x2F;p&gt;</span><br><span class="line">    &lt;div</span><br><span class="line">      class&#x3D;&quot;msg-tpl-ctor-input&quot;</span><br><span class="line">      ref&#x3D;&quot;msgTplCtorContent&quot;</span><br><span class="line">      :id&#x3D;&quot;contentId&quot;</span><br><span class="line">      @input&#x3D;&quot;handleInput&quot;</span><br><span class="line">    &#x2F;&gt;</span><br><span class="line">    &lt;p&gt;预览区域： &lt;&#x2F;p&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;msg-tpl-ctor-view&quot;&gt;</span><br><span class="line">      &#123;&#123; viewContent &#125;&#125;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;right&quot;&gt;</span><br><span class="line">    &lt;p&gt;标签列表：&lt;&#x2F;p&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;msg-tpl-ctor-tools&quot;&gt;</span><br><span class="line">      &lt;button</span><br><span class="line">        v-for&#x3D;&quot;item in tagList&quot;</span><br><span class="line">        :key&#x3D;&quot;item&quot;</span><br><span class="line">        class&#x3D;&quot;btn&quot;</span><br><span class="line">        @click&#x3D;&quot;addTag(item)&quot;</span><br><span class="line">      &gt;&#123;&#123; item &#125;&#125;&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<p>样式代码：</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.tag-input</span> &#123;</span><br><span class="line">  <span class="attribute">cursor</span>: default <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ecf5ff</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#409eff</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$borderColor</span>: <span class="number">#dcdfe6</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.msg-tpl-ctor</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="selector-class">.left</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">18%</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;-<span class="selector-tag">input</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="variable">$borderColor</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span><br><span class="line">    <span class="attribute">word-break</span>: break-word;</span><br><span class="line">    <span class="comment">// 允许编辑，禁止富文本</span></span><br><span class="line">    -webkit-user-modify: read-write-plaintext-only <span class="meta">!important</span>;</span><br><span class="line">    -moz-user-modify: read-write-plaintext-only <span class="meta">!important</span>;</span><br><span class="line">    -ms-user-modify: read-write-plaintext-only <span class="meta">!important</span>;</span><br><span class="line">    &amp;<span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">      <span class="attribute">outline</span>: none;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;-view &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="variable">$borderColor</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span><br><span class="line">    <span class="attribute">word-break</span>: break-word;</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;-tools &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="variable">$borderColor</span>;</span><br><span class="line">    <span class="selector-class">.btn</span> &#123;</span><br><span class="line">      <span class="attribute">display</span>: inline-block;</span><br><span class="line">      <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">      <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">      <span class="attribute">cursor</span>: pointer;</span><br><span class="line">      <span class="attribute">background</span>: <span class="number">#FFF</span>;</span><br><span class="line">      <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#DCDFE6</span>;</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#606266</span>;</span><br><span class="line">      -webkit-appearance: none;</span><br><span class="line">      <span class="attribute">text-align</span>: center;</span><br><span class="line">      -webkit-<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">      <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">      <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attribute">margin</span>: <span class="number">5px</span>;</span><br><span class="line">      -webkit-<span class="attribute">transition</span>: .<span class="number">1s</span>;</span><br><span class="line">      <span class="attribute">transition</span>: .<span class="number">1s</span>;</span><br><span class="line">      <span class="attribute">font-weight</span>: <span class="number">500</span>;</span><br><span class="line">      -moz-user-<span class="selector-tag">select</span>: none;</span><br><span class="line">      -webkit-user-<span class="selector-tag">select</span>: none;</span><br><span class="line">      -ms-user-<span class="selector-tag">select</span>: none;</span><br><span class="line">      <span class="attribute">padding</span>: <span class="number">9px</span> <span class="number">15px</span>;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">      &amp;<span class="selector-pseudo">:focus</span>, &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#409EFF</span>;</span><br><span class="line">        <span class="attribute">border-color</span>: <span class="number">#c6e2ff</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#ecf5ff</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      &amp;<span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#3a8ee6</span>;</span><br><span class="line">        <span class="attribute">border-color</span>: <span class="number">#3a8ee6</span>;</span><br><span class="line">        <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="处理逻辑"><a href="#处理逻辑" class="headerlink" title="处理逻辑"></a>处理逻辑</h3><p>重点：</p>
<ul>
<li>为了解决 ‘标签插入编辑区域的文本中后，标签中的文字不能被选中，只能整体选中这个标签，并且在按 <code>Backspace</code>键 删除时，删除的应该是整个标签。’ 这个问题，我们发现用<code>&lt;input type=&quot;button&quot; /&gt;</code>， 通过修改样式的方式能够很好的解决，满足需求。</li>
<li>鼠标光标的问题，参考 <code>MDN</code> 中 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Document/selectionchange_event">selectionchange</a></li>
</ul>
<p>页面逻辑代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  按照一定格式将html转成纯文本</span></span><br><span class="line"><span class="comment"> * eg:</span></span><br><span class="line"><span class="comment"> *   &lt;input type=&quot;button&quot; class=&quot;tag-input&quot; readonly=&quot;true&quot; value=&quot;法院名称&quot;/&gt;这是文本</span></span><br><span class="line"><span class="comment"> *   =&gt;</span></span><br><span class="line"><span class="comment"> *   [法院名称]这是文本</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">html2Text</span> (<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.replace(<span class="regexp">/\&lt;input([^\&gt;]+)\&gt;/g</span>, <span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> divNode = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">    divNode.innerHTML = item</span><br><span class="line">    <span class="built_in">console</span>.log(item, divNode)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`[<span class="subst">$&#123;divNode.firstChild.value&#125;</span>]`</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成随机的长度为10的字符串</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUuid</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.random().toString(<span class="number">36</span>).substr(<span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;MessageTemplateCreator&#x27;</span>,</span><br><span class="line">  props: &#123;</span><br><span class="line">    value: &#123;</span><br><span class="line">      type: <span class="built_in">String</span>,</span><br><span class="line">      <span class="keyword">default</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    tagList: &#123;</span><br><span class="line">      type: <span class="built_in">Array</span>,</span><br><span class="line">      <span class="keyword">default</span>: <span class="function">() =&gt;</span> []</span><br><span class="line">    &#125;,</span><br><span class="line">    tagInputCls: &#123;</span><br><span class="line">      type: <span class="built_in">String</span>,</span><br><span class="line">      <span class="keyword">default</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// 记录currentText以计算长度</span></span><br><span class="line">      currentText: <span class="built_in">this</span>.value,</span><br><span class="line">      <span class="comment">// 为input区域生成随机id，当在页面上有多个组件时，用于监听光标的变化</span></span><br><span class="line">      contentId: <span class="string">`content<span class="subst">$&#123;getUuid()&#125;</span>`</span>,</span><br><span class="line">      savedRange: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    viewContent () &#123;</span><br><span class="line">      <span class="keyword">return</span> html2Text(<span class="built_in">this</span>.value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted () &#123;</span><br><span class="line">    <span class="comment">// 初始化数据，将从props中传进来的value（首次进入时赋值给了currentText）值初始化到编辑区域内</span></span><br><span class="line">    <span class="built_in">this</span>.currentText &amp;&amp; (<span class="built_in">this</span>.$refs.msgTplCtorContent.innerHTML = <span class="built_in">this</span>.currentText)</span><br><span class="line">    <span class="comment">// 监听document中文本的选择变化</span></span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">&#x27;selectionchange&#x27;</span>, <span class="built_in">this</span>.handleSelect)</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeDestroy () &#123;</span><br><span class="line">    <span class="comment">// 卸载事件</span></span><br><span class="line">    <span class="built_in">document</span>.removeEventListener(<span class="string">&#x27;selectionchange&#x27;</span>, <span class="built_in">this</span>.handleSelect)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    addTag (text) &#123;</span><br><span class="line">      <span class="comment">// 点击标签时，创建一个button类型的input节点，添加相应的样式，并将标签的文本作为值挂载到input的value属性上，最后将此input节点插入进文本</span></span><br><span class="line">      <span class="keyword">const</span> node = <span class="built_in">document</span>.createElement(<span class="string">&#x27;input&#x27;</span>)</span><br><span class="line">      node.setAttribute(<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;button&#x27;</span>)</span><br><span class="line">      node.setAttribute(<span class="string">&#x27;class&#x27;</span>, <span class="built_in">this</span>.tagInputCls ? <span class="string">`tag-input <span class="subst">$&#123;<span class="built_in">this</span>.tagInputCls&#125;</span>`</span> : <span class="string">&#x27;tag-input&#x27;</span>)</span><br><span class="line">      node.setAttribute(<span class="string">&#x27;readonly&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line">      node.setAttribute(<span class="string">&#x27;value&#x27;</span>, text)</span><br><span class="line">      <span class="built_in">this</span>.insertNode(node)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 在内容中插入标签</span></span><br><span class="line">    insertNode (node) &#123;</span><br><span class="line">      <span class="comment">// 删掉选中的内容（如有）</span></span><br><span class="line">      <span class="built_in">this</span>.savedRange.deleteContents()</span><br><span class="line">      <span class="comment">// 插入标签</span></span><br><span class="line">      <span class="built_in">this</span>.savedRange.insertNode(node)</span><br><span class="line">      <span class="comment">// 更新双向绑定数据</span></span><br><span class="line">      <span class="keyword">let</span> target = <span class="built_in">this</span>.$refs.msgTplCtorContent</span><br><span class="line">      <span class="built_in">this</span>.updateData(target.innerHTML)</span><br><span class="line">      <span class="built_in">this</span>.currentText = target.innerText</span><br><span class="line">    &#125;,</span><br><span class="line">    updateData (text) &#123;</span><br><span class="line">      <span class="built_in">this</span>.$emit(<span class="string">&#x27;input&#x27;</span>, text)</span><br><span class="line">    &#125;,</span><br><span class="line">    handleSelect () &#123;</span><br><span class="line">      <span class="comment">// 监听选定文本的变动</span></span><br><span class="line">      <span class="keyword">let</span> sel = <span class="built_in">document</span>.getSelection()</span><br><span class="line">      <span class="keyword">let</span> range = sel.rangeCount &gt; <span class="number">0</span> ? sel.getRangeAt(<span class="number">0</span>) : <span class="literal">null</span></span><br><span class="line">      <span class="comment">// 监听到选中的文本在编辑区域内</span></span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        range &amp;&amp;</span><br><span class="line">        range.commonAncestorContainer.ownerDocument.activeElement.id ===</span><br><span class="line">        <span class="built_in">this</span>.contentId</span><br><span class="line">      ) &#123;</span><br><span class="line">        <span class="built_in">this</span>.savedRange = range</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    handleInput (e) &#123;</span><br><span class="line">      <span class="built_in">this</span>.updateData(e.target.innerHTML)</span><br><span class="line">      <span class="built_in">this</span>.currentText = e.target.innerText</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>以上为全部代码。</p>

      
    </div>
    <footer class="article-footer">
      <!-- <a data-url="http://ax-jun.gitee.io/blog/2020/12/02/message-template-creator/" data-id="ckiwj8v740001ngul7oskdaun" class="article-share-link">Share</a> -->
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-react-stop-propagation" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/12/01/react-stop-propagation/" class="article-date">
  <time datetime="2020-12-01T10:35:22.000Z" itemprop="datePublished">2020-12-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/Reactjs/">Reactjs</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2020/12/01/react-stop-propagation/">react中阻止事件冒泡</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="react中阻止事件冒泡并不是简单stopPropagation就完事了，需要区分几种情况，下面简单说一下这几种情况下如何准确的阻止冒泡："><a href="#react中阻止事件冒泡并不是简单stopPropagation就完事了，需要区分几种情况，下面简单说一下这几种情况下如何准确的阻止冒泡：" class="headerlink" title="react中阻止事件冒泡并不是简单stopPropagation就完事了，需要区分几种情况，下面简单说一下这几种情况下如何准确的阻止冒泡："></a>react中阻止事件冒泡并不是简单stopPropagation就完事了，需要区分几种情况，下面简单说一下这几种情况下如何准确的阻止冒泡：</h2><p>####直接看栗子：</p>
<p><img src="https://cnax.github.io/cdn/blog/react-stop-propagation/20180910153058490.png" alt="页面显示"><br>页面上3个div，如图所示<br><strong>1、在没有涉及到原生事件注册只有react事件时，用e.stopPropagation()阻止冒泡，代码如下：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  handleClickTestBox = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.warn(<span class="string">&#x27;handleClickTestBox: &#x27;</span>, e);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleClickTestBox2 = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.warn(<span class="string">&#x27;handleClickTestBox2: &#x27;</span>, e);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleClickTestBox3 = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    e.stopPropagation();</span><br><span class="line">    <span class="built_in">console</span>.warn(<span class="string">&#x27;handleClickTestBox3: &#x27;</span>, e);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div</span><br><span class="line">        className=<span class="string">&quot;test-box&quot;</span></span><br><span class="line">        onClick=&#123;<span class="built_in">this</span>.handleClickTestBox&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;div</span><br><span class="line">          onClick=&#123;<span class="built_in">this</span>.handleClickTestBox2&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;div</span><br><span class="line">            onClick=&#123;<span class="built_in">this</span>.handleClickTestBox3&#125;</span><br><span class="line">          &gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>控制台打印：<br><img src="https://cnax.github.io/cdn/blog/react-stop-propagation/2.png" alt="结果"><br>成功阻止事件的冒泡</p>
<p><strong>2、当用document.addEventListener注册了原生的事件后，用e.stopPropagation()是不能阻止与document之间的冒泡，这时候需要用到e.nativeEvent.stopImmediatePropagation()方法，代码如下：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="built_in">this</span>.handleDocumentClick, <span class="literal">false</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  handleDocumentClick = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;handleDocumentClick: &#x27;</span>, e);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleClickTestBox = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.warn(<span class="string">&#x27;handleClickTestBox: &#x27;</span>, e);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleClickTestBox2 = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.warn(<span class="string">&#x27;handleClickTestBox2: &#x27;</span>, e);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleClickTestBox3 = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 阻止合成事件的冒泡</span></span><br><span class="line">    e.stopPropagation();</span><br><span class="line">    <span class="comment">// 阻止与原生事件的冒泡</span></span><br><span class="line">    e.nativeEvent.stopImmediatePropagation();</span><br><span class="line">    <span class="built_in">console</span>.warn(<span class="string">&#x27;handleClickTestBox3: &#x27;</span>, e);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div</span><br><span class="line">        className=<span class="string">&quot;test-box&quot;</span></span><br><span class="line">        onClick=&#123;<span class="built_in">this</span>.handleClickTestBox&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;div</span><br><span class="line">          onClick=&#123;<span class="built_in">this</span>.handleClickTestBox2&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;div</span><br><span class="line">            onClick=&#123;<span class="built_in">this</span>.handleClickTestBox3&#125;</span><br><span class="line">          &gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="https://cnax.github.io/cdn/blog/react-stop-propagation/3.png" alt="结果"></p>
<p><strong>3、阻止合成事件与非合成事件（除了document）之间的冒泡，以上两种方式都不适用，需要用到e.target 判断， 代码如下：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="built_in">this</span>.handleDocumentClick, <span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">document</span>.body.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="built_in">this</span>.handleBodyClick, <span class="literal">false</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  handleDocumentClick = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;handleDocumentClick: &#x27;</span>, e);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleBodyClick = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (e.target &amp;&amp; e.target === <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#inner&#x27;</span>)) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;handleBodyClick: &#x27;</span>, e);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleClickTestBox = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.warn(<span class="string">&#x27;handleClickTestBox: &#x27;</span>, e);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleClickTestBox2 = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.warn(<span class="string">&#x27;handleClickTestBox2: &#x27;</span>, e);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleClickTestBox3 = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 阻止合成事件的冒泡</span></span><br><span class="line">    e.stopPropagation();</span><br><span class="line">    <span class="comment">// 阻止与原生事件的冒泡</span></span><br><span class="line">    e.nativeEvent.stopImmediatePropagation();</span><br><span class="line">    <span class="built_in">console</span>.warn(<span class="string">&#x27;handleClickTestBox3: &#x27;</span>, e);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div</span><br><span class="line">        className=<span class="string">&quot;test-box&quot;</span></span><br><span class="line">        onClick=&#123;<span class="built_in">this</span>.handleClickTestBox&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;div</span><br><span class="line">          onClick=&#123;<span class="built_in">this</span>.handleClickTestBox2&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;div</span><br><span class="line">            id=<span class="string">&quot;inner&quot;</span></span><br><span class="line">            onClick=&#123;<span class="built_in">this</span>.handleClickTestBox3&#125;</span><br><span class="line">          &gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>控制台打印：<br><img src="https://cnax.github.io/cdn/blog/react-stop-propagation/5.png" alt="结果"></p>

      
    </div>
    <footer class="article-footer">
      <!-- <a data-url="http://ax-jun.gitee.io/blog/2020/12/01/react-stop-propagation/" data-id="ckiwj8v7f000jngulhr01e331" class="article-share-link">Share</a> -->
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/react/" rel="tag">react</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/%E9%98%BB%E6%AD%A2%E5%86%92%E6%B3%A1/" rel="tag">阻止冒泡</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-vue-lifecycle" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/12/01/vue-lifecycle/" class="article-date">
  <time datetime="2020-12-01T10:26:08.000Z" itemprop="datePublished">2020-12-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/Vuejs/">Vuejs</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2020/12/01/vue-lifecycle/">vue父子组件生命周期执行顺序</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h6 id="先上一张Vue2-X官方文档中组件生命周期的图示："><a href="#先上一张Vue2-X官方文档中组件生命周期的图示：" class="headerlink" title="先上一张Vue2.X官方文档中组件生命周期的图示："></a>先上一张Vue2.X官方文档中组件生命周期的图示：</h6><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jbi52dWVqcy5vcmcvaW1hZ2VzL2xpZmVjeWNsZS5wbmc?x-oss-process=image/format,png#pic_center" alt="在这里插入图片描述"><br>从上图能很清楚的看出单个组件的生命周期：<br>挂载： beforeCreate =&gt; created =&gt; beforeMount =&gt; mounted<br>更新： beforeUpdate =&gt; updated<br>销毁： beforeDestroy =&gt; destroyed</p>
<h6 id="问：父子组件的生命周期执行顺序？"><a href="#问：父子组件的生命周期执行顺序？" class="headerlink" title="问：父子组件的生命周期执行顺序？"></a>问：父子组件的生命周期执行顺序？</h6><p>答：<br>挂载： <strong>parent beforeCreate</strong> =&gt; <strong>parent created</strong> =&gt; <strong>parent beforeMount</strong> =&gt; <strong>child beforeCreate</strong> =&gt; <strong>child created</strong> =&gt; <strong>child beforeMount</strong> =&gt; <strong>child mounted</strong> =&gt; <strong>parent mounted</strong><br>更新： <strong>parent beforeUpdate</strong> =&gt; <strong>child beforeUpdate</strong> =&gt; <strong>child updated =&gt; parent updated</strong><br>销毁： <strong>parent beforeDestroy</strong> =&gt; <strong>child beforeDestroy</strong> =&gt; <strong>child destroyed</strong> =&gt; <strong>parent destroyed</strong></p>
<p><em>从以上能够看出：</em></p>
<ul>
<li>挂载时，子组件是在父组件before mount后开始挂载，并且子组件先mounted，父组件随后</li>
<li>更新时，子组件是在父组件before update后开始更新，子组件先于父组件更新</li>
<li>销毁时，子组件是在父组件before destroy后开始销毁，并且是子组件先销毁，父组件随后。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <!-- <a data-url="http://ax-jun.gitee.io/blog/2020/12/01/vue-lifecycle/" data-id="ckiwj8v7e000gngulhs2mgyco" class="article-share-link">Share</a> -->
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/vue/" rel="tag">vue</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/" rel="tag">生命周期</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-dingding-devtools-MUMU" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/12/01/dingding-devtools-MUMU/" class="article-date">
  <time datetime="2020-12-01T08:50:30.000Z" itemprop="datePublished">2020-12-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/%E5%B7%A5%E5%85%B7/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2020/12/01/dingding-devtools-MUMU/">win10 系统中使用网易MuMu模拟器调试钉钉微应用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h6 id="在进行钉钉为应用开发的时候，我们没有很好地调试工具，虽然官方提供了调试工具，但并不是很好用，为此，我想到了使用手机模拟器在chrome浏览器上进行调试。"><a href="#在进行钉钉为应用开发的时候，我们没有很好地调试工具，虽然官方提供了调试工具，但并不是很好用，为此，我想到了使用手机模拟器在chrome浏览器上进行调试。" class="headerlink" title="在进行钉钉为应用开发的时候，我们没有很好地调试工具，虽然官方提供了调试工具，但并不是很好用，为此，我想到了使用手机模拟器在chrome浏览器上进行调试。"></a>在进行钉钉为应用开发的时候，我们没有很好地调试工具，虽然官方提供了调试工具，但并不是很好用，为此，我想到了使用手机模拟器在chrome浏览器上进行调试。</h6><h4 id="1、下载"><a href="#1、下载" class="headerlink" title="1、下载"></a>1、下载</h4><p>官网地址：<a target="_blank" rel="noopener" href="http://mumu.163.com/">http://mumu.163.com/</a><br>下载windows版本app，根据提示安装，安装过程中遇到需要开启VT，请参考<a target="_blank" rel="noopener" href="http://mumu.163.com/include/16v1/2016/06/27/21967_625825.html">http://mumu.163.com/include/16v1/2016/06/27/21967_625825.html</a></p>
<h4 id="2、在模拟器中下载安装钉钉开发版"><a href="#2、在模拟器中下载安装钉钉开发版" class="headerlink" title="2、在模拟器中下载安装钉钉开发版"></a>2、在模拟器中下载安装钉钉开发版</h4><p>模拟器安装完成后在<code>win10</code>系统上下载 <code>钉钉开发安卓版</code>  ，下载完成后，点击模拟器底部的 <code>安装</code> 按钮，找到 <code>钉钉开发安卓版</code> 选中安装</p>
<h4 id="3、电脑系统与模拟器的连接"><a href="#3、电脑系统与模拟器的连接" class="headerlink" title="3、电脑系统与模拟器的连接"></a>3、电脑系统与模拟器的连接</h4><p>请参考官网地址： <a target="_blank" rel="noopener" href="http://mumu.163.com/help/func/20190129/30131_797867.html">http://mumu.163.com/help/func/20190129/30131_797867.html</a> 页面中的第2条，使模拟器与win10系统连接（此处我理解为手机用USB线连接电脑一样，不连接后续无法调试）</p>
<h4 id="4、开启调试权限"><a href="#4、开启调试权限" class="headerlink" title="4、开启调试权限"></a>4、开启调试权限</h4><p>打开在模拟器中安装好的钉钉，登录进去，打开 我的 –&gt; 设置 –&gt; 通用 –&gt; 开发者选项  –&gt; 打开 微应用调试开关</p>
<p><strong>到此安装、连接、授权调试结束。</strong></p>
<h4 id="5、试验"><a href="#5、试验" class="headerlink" title="5、试验"></a>5、试验</h4><p>在钉钉app中找个聊天窗口，发一条信息，信息内容是你需要调试的页面url地址 eg: <a target="_blank" rel="noopener" href="https://www.baidu.com/">https://www.baidu.com</a><br>打开<code>chrome</code>浏览器，地址栏输入  <code>chrome://inspect/#devices</code> ，就能看到需要调试的页面地址和信息，点击<code>inspect</code>开始调试</p>

      
    </div>
    <footer class="article-footer">
      <!-- <a data-url="http://ax-jun.gitee.io/blog/2020/12/01/dingding-devtools-MUMU/" data-id="ckiwj8v770004ngulac2r5ool" class="article-share-link">Share</a> -->
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/%E9%92%89%E9%92%89%E8%B0%83%E8%AF%95/" rel="tag">钉钉调试</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-git-ssh" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/12/01/git-ssh/" class="article-date">
  <time datetime="2020-12-01T08:44:30.000Z" itemprop="datePublished">2020-12-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/%E5%B7%A5%E5%85%B7/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2020/12/01/git-ssh/">git-ssh 的使用配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li>生成ssh key，打开终端，输入以下命令</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;1462438798@qq.com&quot;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>完成之后，找到对应的文件</p>
<p> <em>C:\Users\14624.ssh 中 id_rsa.pub 文件</em></p>
</li>
<li><p>打开 id_rsa.pub文件 ，复制内容</p>
</li>
<li><p>打开网址 <a target="_blank" rel="noopener" href="https://github.com/settings/ssh/new">https://github.com/settings/ssh/new</a> ，将复制的内容粘贴到key的输入框中</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <!-- <a data-url="http://ax-jun.gitee.io/blog/2020/12/01/git-ssh/" data-id="ckiwj8v700000ngulc2ag7gc2" class="article-share-link">Share</a> -->
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/git/" rel="tag">git</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-npm-npx-nrm" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/12/01/npm-npx-nrm/" class="article-date">
  <time datetime="2020-12-01T08:12:30.000Z" itemprop="datePublished">2020-12-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/%E5%B7%A5%E5%85%B7/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2020/12/01/npm-npx-nrm/">npm、npx、nrm的简单用法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1、npm"><a href="#1、npm" class="headerlink" title="1、npm"></a>1、npm</h2><p>注： 官网地址：<a target="_blank" rel="noopener" href="https://nodejs.org/en/">https://nodejs.org/en/</a></p>
<p>建议安装稳定版本（长期维护版 LTS），下载之后，傻瓜式安装，安装完成后，建议修改<code>npm</code>镜像源：<br><strong>1、持久版，建议使用</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

<p>设置后，输入  npm config get registry 查看是否成功<br>打印出： <a target="_blank" rel="noopener" href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a>   ，表示成功</p>
<p><strong>2、临时版</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm --registry https://registry.npm.taobao.org install react</span><br></pre></td></tr></table></figure>

<p><strong>3、使用<code>cnpm</code></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line">cnpm i react</span><br></pre></td></tr></table></figure>

<h2 id="2、npx"><a href="#2、npx" class="headerlink" title="2、npx"></a>2、npx</h2><p><code>npm</code> 从5.2版开始，增加了 <code>npx</code> 命令。万一不能用，就要手动安装一下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g npx</span><br></pre></td></tr></table></figure>

<p>常用命令：（<code>npx</code> 想要解决的主要问题，就是调用项目内部安装的模块。）<br>项目中<code>package.json</code>中 <code>webpack</code> 的版本号：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack --version</span><br></pre></td></tr></table></figure>

<p>使用项目中的安装的版本 <code>webpack</code> 执行打包：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure>
<p><strong>避免全局安装模块</strong></p>
<p>除了调用项目内部模块，<code>npx</code> 还能避免全局安装的模块。比如，<code>create-react-app</code> 这个模块是全局安装，<code>npx</code> 可以运行它，而且不进行全局安装。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app my-react-app</span><br></pre></td></tr></table></figure>

<p>上面代码运行时，<code>npx</code> 将 <code>create-react-app</code> 下载到一个临时目录，使用以后再删除。所以，以后再次执行上面的命令，会重新下载 <code>create-react-app</code> 。</p>
<h2 id="3、nrm"><a href="#3、nrm" class="headerlink" title="3、nrm"></a>3、nrm</h2><p><strong>一、什么是nrm</strong></p>
<p><code>nrm</code>  是一个 <code>npm</code> 源管理器，允许你快速地在 <code>npm</code> 源间切换。<br><code>npm</code> 默认情况下是使用 <code>npm</code> 官方源（使用 <strong>npm config ls</strong> 命令可以查看），国内访问此源的速度很慢，甚至无法访问！为了能够正常使用，国内开发者一般都会用淘宝<code>npm</code>源：<a target="_blank" rel="noopener" href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org/</a>。<br>使用命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="built_in">set</span> registry https://registry.npm.taobao.org/</span><br></pre></td></tr></table></figure>
<p>如果是内网开发者，公司内部会将<code>npm</code>源部署到私库上，这几种情况下，我们就需要手动去记录淘宝源和公司私库上的<code>npm</code>源，手动切换，这将会很麻烦！！！<br>为了更好地进行 <code>npm</code> 源的管理，<code>nrm</code> 应运而生。</p>
<p><strong>二、安装</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g nrm</span><br></pre></td></tr></table></figure>


<p><strong>三、使用</strong><br>1、查看可选源（带*号即为当前使用源）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nrm ls</span><br></pre></td></tr></table></figure>

<p>2、查看当前使用源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nrm current</span><br></pre></td></tr></table></figure>

<p>3、切换源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nrm use &lt;registry name&gt;</span><br></pre></td></tr></table></figure>

<p>4、添加源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nrm add &lt;registry name&gt; &lt;url&gt;</span><br></pre></td></tr></table></figure>

<p>如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nrm add cpm http://192.168.22.11:8888/repository/npm-public/</span><br></pre></td></tr></table></figure>

<p>5、删除源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nrm del &lt;registry name&gt;</span><br></pre></td></tr></table></figure>

<p>6、测试源速度（即响应时间）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nrm <span class="built_in">test</span> npm</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <!-- <a data-url="http://ax-jun.gitee.io/blog/2020/12/01/npm-npx-nrm/" data-id="ckiwj8v780005ngul0jvc99xc" class="article-share-link">Share</a> -->
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/npm/" rel="tag">npm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/npx/" rel="tag">npx</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/nrm/" rel="tag">nrm</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-git-start" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/12/01/git-start/" class="article-date">
  <time datetime="2020-12-01T08:02:17.000Z" itemprop="datePublished">2020-12-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/%E5%B7%A5%E5%85%B7/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2020/12/01/git-start/">git 入门命令</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1、配置用户名和邮箱<br>这两条配置很重要，每次 Git 提交时都会引用这两条信息，说明是谁提交了更新，所以会随更新内容一起被永久纳入历史记录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;ax&quot;</span></span><br><span class="line">git config --global user.email ax@example.com</span><br></pre></td></tr></table></figure>
<p>如果用了 –global 选项，那么更改的配置文件就是位于你用户主目录下的那个，以后你所有的项目都会默认使用这里配置的用户信息。如果要在某个特定的项目中使用其他名字或者电邮，只要去掉 –global 选项重新配置即可，新的设定保存在当前项目的 .git/config 文件里。</p>
<p>2、配置常用到的别名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git config --global alias.st status</span><br><span class="line">git config --global alias.co checkout</span><br><span class="line">git config --global alias.ci commit</span><br><span class="line">git config --global alias.br branch</span><br></pre></td></tr></table></figure>

<p>3、使用git config –list查看已有的配置信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git config --list</span><br><span class="line">user.email=ax@qq.com</span><br><span class="line">user.name=ax</span><br><span class="line">core.autocrlf=input</span><br></pre></td></tr></table></figure>
<p>4、git 基本的使用<br>克隆远程仓库的代码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> 远程仓库地址</span><br></pre></td></tr></table></figure>
<p>切换到A分支：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout A</span><br></pre></td></tr></table></figure>
<p>暂存单个文件src/index.js的更改：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add src/index.js</span><br></pre></td></tr></table></figure>
<p>暂存所有的更改：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br></pre></td></tr></table></figure>
<p>提交暂存</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git ci -m <span class="string">&#x27;message&#x27;</span></span><br></pre></td></tr></table></figure>
<p>更新远程仓库A的b1分支代码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull A b1</span><br></pre></td></tr></table></figure>
<p>上传代码到远程仓库A的b1分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push A b1</span><br></pre></td></tr></table></figure>

<p>5.配置多个远程仓库地址</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote add group 远程group仓库地址</span><br><span class="line">git remote add mine 远程mine仓库地址</span><br><span class="line">git remote add origin 远程origin仓库地址</span><br></pre></td></tr></table></figure>
<p>删除本地的远程origin地址</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote rm origin</span><br></pre></td></tr></table></figure>
<p>查看本地远程仓库地址</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br></pre></td></tr></table></figure>
<p>更新本地仓库地址</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote set-url origin 新的url</span><br></pre></td></tr></table></figure>

<p>6、本地新建分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch A</span><br></pre></td></tr></table></figure>
<p>可以通过 git branch –list  查看所有分支，判断是否成功创建分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout A   切换到A分支</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <!-- <a data-url="http://ax-jun.gitee.io/blog/2020/12/01/git-start/" data-id="ckiwj8v7a000angulchsi527v" class="article-share-link">Share</a> -->
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/git/" rel="tag">git</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-react-lifecycle" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/12/01/react-lifecycle/" class="article-date">
  <time datetime="2020-12-01T07:13:57.000Z" itemprop="datePublished">2020-12-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/Reactjs/">Reactjs</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2020/12/01/react-lifecycle/">react基础--生命周期</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1、装载过程："><a href="#1、装载过程：" class="headerlink" title="1、装载过程："></a>1、装载过程：</h2><p>constructor<br>getDefaultProps<br>getInitialState<br>componentWillMount<br>render<br>componentDidMount</p>
<h2 id="2、更新过程"><a href="#2、更新过程" class="headerlink" title="2、更新过程"></a>2、更新过程</h2><p>componentWillReceiveProps<br>shouldComponentUpdate<br>componentWillUpdate<br>render<br>componentDidUpdate</p>
<h2 id="3、卸载过程"><a href="#3、卸载过程" class="headerlink" title="3、卸载过程"></a>3、卸载过程</h2><p>componentWillUnmount</p>
<p><strong>在React16版本中，新增getDerivedStateFromProps、getSnapshotBeforeUpdate两个生命周期方法：</strong><br>getDerivedStateFromProps： 根据props变化更新内部状态state<br>getDerivedStateFromProps具体用法和注意事项参考官方文档：<br><a target="_blank" rel="noopener" href="https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html">https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html</a><br>getSnapshotBeforeUpdate： 这个方法会在把渲染结果提交到DOM之前被调用。它可以返回一个参数，这个参数被componentDidUpdate(prevProps, prevState, snapshot)方法的第三个参数接收。<br>getSnapshotBeforeUpdate具体用法和注意事项参考官方文档：<br><a target="_blank" rel="noopener" href="https://reactjs.org/docs/react-component.html#getsnapshotbeforeupdate">https://reactjs.org/docs/react-component.html#getsnapshotbeforeupdate</a></p>

      
    </div>
    <footer class="article-footer">
      <!-- <a data-url="http://ax-jun.gitee.io/blog/2020/12/01/react-lifecycle/" data-id="ckiwj8v790006ngul0h72bnyb" class="article-share-link">Share</a> -->
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/react/" rel="tag">react</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/" rel="tag">生命周期</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-vue-loading" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/12/01/vue-loading/" class="article-date">
  <time datetime="2020-12-01T07:09:50.000Z" itemprop="datePublished">2020-12-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/Vuejs/">Vuejs</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2020/12/01/vue-loading/">需要使用element-ui的loading组件</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h6 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Loading &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// loading实例</span></span><br><span class="line"><span class="keyword">let</span> loadingInstance = <span class="literal">null</span></span><br><span class="line"><span class="comment">// 计数器</span></span><br><span class="line"><span class="keyword">let</span> loadingCount = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭loading框</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> finishLoading = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  loadingCount--</span><br><span class="line">  <span class="keyword">if</span> (loadingInstance &amp;&amp; loadingCount === <span class="number">0</span>) &#123;</span><br><span class="line">    loadingInstance.close()</span><br><span class="line">    loadingInstance = <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开启loading框</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> startLoading = (&#123;</span><br><span class="line">  text = <span class="string">&#x27;数据加载中...&#x27;</span>,</span><br><span class="line">  fullscreen = <span class="literal">true</span>,</span><br><span class="line">  spinner = <span class="string">&#x27;el-icon-loading&#x27;</span>,</span><br><span class="line">  needLoading = <span class="literal">true</span></span><br><span class="line">&#125; = &#123;&#125;) =&gt; &#123;</span><br><span class="line">  loadingCount++</span><br><span class="line">  <span class="comment">// 上一个请求的loading还存在，就不需要继续生成loading服务</span></span><br><span class="line">  <span class="keyword">if</span> (needLoading &amp;&amp; !loadingInstance) &#123;</span><br><span class="line">    loadingInstance = Loading.service(&#123;</span><br><span class="line">      fullscreen,</span><br><span class="line">      text,</span><br><span class="line">      spinner,</span><br><span class="line">      background: <span class="string">&#x27;rgba(0, 0, 0, 0.7)&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <!-- <a data-url="http://ax-jun.gitee.io/blog/2020/12/01/vue-loading/" data-id="ckiwj8v7b000bngul5jbqgf6s" class="article-share-link">Share</a> -->
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/loading/" rel="tag">loading</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/loading/" rel="tag">loading</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/npm/" rel="tag">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/npx/" rel="tag">npx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/nrm/" rel="tag">nrm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/react/" rel="tag">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/" rel="tag">生命周期</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E9%92%89%E9%92%89%E8%B0%83%E8%AF%95/" rel="tag">钉钉调试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E9%98%BB%E6%AD%A2%E5%86%92%E6%B3%A1/" rel="tag">阻止冒泡</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2020/12/">十二月 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2020/12/02/message-template-creator/">短信消息模板配置</a>
          </li>
        
          <li>
            <a href="/blog/2020/12/01/react-stop-propagation/">react中阻止事件冒泡</a>
          </li>
        
          <li>
            <a href="/blog/2020/12/01/vue-lifecycle/">vue父子组件生命周期执行顺序</a>
          </li>
        
          <li>
            <a href="/blog/2020/12/01/dingding-devtools-MUMU/">win10 系统中使用网易MuMu模拟器调试钉钉微应用</a>
          </li>
        
          <li>
            <a href="/blog/2020/12/01/git-ssh/">git-ssh 的使用配置</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 cnax<br>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/categories/Vuejs/" class="mobile-nav-link">Vuejs</a>
  
    <a href="/blog/categories/Reactjs/" class="mobile-nav-link">Reactjs</a>
  
    <a href="/blog/categories/%E5%B7%A5%E5%85%B7/" class="mobile-nav-link">工具</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">

  
<script src="/blog/fancybox/jquery.fancybox.pack.js"></script>




<script src="/blog/js/script.js"></script>




  </div>
</body>
</html>